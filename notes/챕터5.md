# 스프링 시큐리티와 OAuth2.0으로 로그인 기능 구현하기
spring-security-oauth2-autoconfigure 라이브러리 덕분에, 설정 방법이 기존 방법에 비해 크게 달라지지 않았다.

하지만, Spring Security Oauth2 Client 라이브러리를 사용해서 진행한다. 그 이유는 다음과 같다.

 - spring-security-oauth 프로젝트는 신규 기능은 추가하지 않겠다고 선언
 - 스프링 부트용 라이브러리 출시
 - 신규 라이브러리의 경우 확장 포인트를 고려해서 설계된 상태

스프링 부트 2 방식의 자료를 찾고 싶을 때 확인해야 할 것

 - spring-security-oauth2-autoconfigure 라이브러리를 사용했는지
 - application.properties 혹은 application.yml의 정보의 차이
    
     - 1.5에서는 url 주소를 모두 명시해야 핬지만, 2.0방식에서는 client인증 정보만 입력하면 된다

@Enumerated 라는 데코레이터 : JPA로 데이터베이스로 저장할 때 Enum 값을 어떤 형태로 저장할지 결정한다.

스프링 시큐리티에서는 권한 코드 에 항상 ROLE_이 붙어야 한다. 그래서 코드별 키 값을 ROLE_**으로 설정한다.

build.gradle에 compile('org.springframework.boot:spring-boot-starter-oauth2-client')을 추가한다.

OAuth2User에서 반환하는 사용자 정보는 Map이기 때문에 값 하나하나를 변환해서 저장해야 한다.

### User클래스를 그대로 사용하지 않고 Dto를 생성하는 이유
User클래스는 엔티티 자체이기 때문에, 언제 다른 엔티티와 관계가 형성 될 지 모른다. 따라서 엔티티를 직렬화 시킨다면 그 자식들까지 직렬화 되므로 성능이슈, 부수 효과 까지 발생할 확률이 높다.

### LoginUser 어노테이션 생성
@Target : 어노테이션이 생성될 수 있는 위치를 지정
@interrface : 어노테이션 생성하는 @

#### HandlerMethodArgumentResolver 인터페이스
조건에 맞는 경우 메서드가 있다면 이의 구현체가 지정한 값으로 해당 메소드의 파라미터로 넘길 수 있다.

supportsParameter() : 컨트롤러 메서드의 특정 파라미터를 지원하는지 판단한다.
resolveArgument() : 파라미터에 전달할 객체를 생성한다.